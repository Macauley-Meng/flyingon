<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--以IE的当前版本渲染,如果安装了ChromeFrame则优先使用-->
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />-->
    <meta http-equiv="X-UA-Compatible" content="IE=7" />
    <title></title>
</head>
<body style="margin: 0;">

    <div style="width: 100%; height: 100%;">

        <div id="drag" style="background-color: yellow;">

            <input type="button" value="Paint" onclick="paint()" />

            <span style="width: 10px"></span>
            <input type="button" value="line" onclick="layout('line')" />
            <input type="button" value="flow" onclick="layout('flow')" />
            <input type="button" value="page" onclick="layout('page')" />
            <input type="button" value="dock" onclick="layout('dock')" />
            <input type="button" value="grid" onclick="layout('grid')" />
            <input type="button" value="table" onclick="layout('table')" />
            <input type="button" value="absolute" onclick="layout('absolute')" />

            <span style="width: 10px"></span>
            <input type="button" value="horizontalLine" onclick="layoutVertical(false)" />
            <input type="button" value="verticalLine" onclick="layoutVertical(true)" />

            <span style="width: 10px"></span>
            <input type="button" value="ltr" onclick="direction('ltr')" />
            <input type="button" value="rtl" onclick="direction('rtl')" />

        </div>

        <div id="message" style="height:30px;">

        </div>

        <div id="host" style="width: 100%; height: 600px;">
        </div>

    </div>


    <script src="../scripts/flyingon.js"></script>
    <script src="../themes/default/flyingon.js"></script>

    <script type="text/javascript">


        var date = new Date();

        for (var i = 0; i < 1000; i++)
        {
            new flyingon.Button();
        }

        //alert(new Date() - date);


        date = new Date();


        var w = new flyingon.Window(host).sets({

            layoutType: "flow",
            padding: "10px",
            border: "4px solid blue",
            spacingWidth: "10px",
            spacingHeight: "10px"
        });


        for (var k = 0; k < 10; k++)
        {
            var panel = new flyingon.Panel().sets({

                width: "500px",
                height: "400px",
                border: "4px solid red",
                padding: "10px",

                layoutType: "flow",
                spacingWidth: "10px",
                spacingHeight: "10px",

                layoutTable: "*[50% * *] *[* 50% table(50% 50%) *[* * *] *[* * *] *[* * *] end *] *[* * * *]"
            });

            for (var i = 0; i < 100; i++)
            {

                var ctrl = new flyingon.Button().sets({

                    left: i % 5 * 120 + "px",
                    top: i / 5 * 30 + "px",
                    text: "button" + i
                });

                switch (i % 5)
                {
                    case 0:
                        ctrl.set_dock("left");
                        break;

                    case 1:
                        ctrl.set_dock("top");
                        break;

                    case 2:
                        ctrl.set_dock("right");
                        break;

                    case 3:
                        ctrl.set_dock("bottom");
                        break;

                    case 4:
                        ctrl.set_dock("fill");
                        break;
                }

                panel.appendChild(ctrl);
            }

            w.appendChild(panel);
        }


        //alert(new Date() - date);


        function paint() {

            var control = w.get_children()[0].get_children()[0];
            var date = new Date();

            for (var i = 0; i < 10000; i++)
            {
                //control.measure(100, 100);
                control.__css_types = null;
                control.update();

                control.render();
            }

            //w.update();

            alert(new Date() - date);
        };


        function layout(value) {

            var date = new Date();

            var children = w.get_children();

            for (var i = 0; i < children.length; i++)
            {
                var panel = children[i];
                panel.set_layoutType(value);
            }

            w.update(false, true);

            alert(new Date() - date);
        };



        function layoutVertical(value) {

            var date = new Date();

            var children = w.get_children();

            for (var i = 0; i < children.length; i++)
            {
                var panel = children[i];
                panel.set_layoutVertical(value);
            }

            w.update();

            alert(new Date() - date);
        };


        function direction(value) {

            var date = new Date();

            var children = w.get_children();

            for (var i = 0; i < children.length; i++)
            {
                var panel = children[i];
                panel.set_direction(value);
            }

            w.update();

            alert(new Date() - date);
        };



        //w.on("mousedown", function (event) {

        //});


        w.on("mousemove", function (event) {

            //var offset = event.offset(event.target);

            //message.innerHTML = "target:" + event.target.xtype + ":" + event.target.get_uniqueId() + " x:" + offset.x + " y:" + offset.y;
        });




        w.on("click", function (event) {

            var offset = event.offset(event.target);

        });

        //w.on("mouseover", function (event) {

        //    document.title = "source :" + event.control.uniqueId + " target:" + event.target.uniqueId;
        //});



    </script>

</body>
</html>
